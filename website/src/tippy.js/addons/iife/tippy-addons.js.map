{"version":3,"file":"tippy-addons.js","sources":["../../src/ponyfills.ts","../../src/browser.ts","../../src/constants.ts","../../src/utils.ts","../../src/validation.ts","../../src/addons/delegate.ts","../../src/addons/createSingleton.ts","../../build/addons.js"],"sourcesContent":["/**\n * Ponyfill for Array.from - converts iterable values to an array\n */\nexport function arrayFrom(value: ArrayLike<any>): any[] {\n  return [].slice.call(value)\n}\n\n/**\n * Works like Element.prototype.closest, but uses a callback instead\n */\nexport function closestCallback(\n  element: Element | null,\n  callback: Function,\n): Element | null {\n  while (element) {\n    if (callback(element)) {\n      return element\n    }\n\n    element = element.parentElement\n  }\n\n  return null\n}\n","export const isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined'\n\nconst ua = isBrowser ? navigator.userAgent : ''\n\nexport const isIE = /MSIE |Trident\\//.test(ua)\nexport const isUCBrowser = /UCBrowser\\//.test(ua)\nexport const isIOS = isBrowser && /iPhone|iPad|iPod/.test(navigator.platform)\n","// Passive event listener config\nexport const PASSIVE = { passive: true }\n\n// Popper `preventOverflow` padding\nexport const PADDING = 4\n\n// Classes\nexport const IOS_CLASS = `__NAMESPACE_PREFIX__-iOS`\nexport const POPPER_CLASS = `__NAMESPACE_PREFIX__-popper`\nexport const TOOLTIP_CLASS = `__NAMESPACE_PREFIX__-tooltip`\nexport const CONTENT_CLASS = `__NAMESPACE_PREFIX__-content`\nexport const BACKDROP_CLASS = `__NAMESPACE_PREFIX__-backdrop`\nexport const ARROW_CLASS = `__NAMESPACE_PREFIX__-arrow`\nexport const SVG_ARROW_CLASS = `__NAMESPACE_PREFIX__-svgArrow`\n\n// Selectors\nexport const POPPER_SELECTOR = `.${POPPER_CLASS}`\nexport const TOOLTIP_SELECTOR = `.${TOOLTIP_CLASS}`\nexport const CONTENT_SELECTOR = `.${CONTENT_CLASS}`\nexport const BACKDROP_SELECTOR = `.${BACKDROP_CLASS}`\nexport const ARROW_SELECTOR = `.${ARROW_CLASS}`\nexport const SVG_ARROW_SELECTOR = `.${SVG_ARROW_CLASS}`\n","import { Props, ReferenceElement, Targets } from './types'\nimport { arrayFrom } from './ponyfills'\nimport { isUCBrowser } from './browser'\nimport { getDataAttributeProps } from './reference'\nimport { POPPER_CLASS } from './constants'\n\n/**\n * Determines if the value is a reference element\n */\nexport function isReferenceElement(value: any): value is ReferenceElement {\n  return !!(value && value._tippy && !value.classList.contains(POPPER_CLASS))\n}\n\n/**\n * Safe .hasOwnProperty check, for prototype-less objects\n */\nexport function hasOwnProperty(obj: object, key: string): boolean {\n  return {}.hasOwnProperty.call(obj, key)\n}\n\n/**\n * Returns an array of elements based on the value\n */\nexport function getArrayOfElements(value: Targets): Element[] {\n  if (isRealElement(value)) {\n    return [value]\n  }\n\n  if (value instanceof NodeList) {\n    return arrayFrom(value)\n  }\n\n  if (Array.isArray(value)) {\n    return value\n  }\n\n  try {\n    return arrayFrom(document.querySelectorAll(value))\n  } catch (e) {\n    return []\n  }\n}\n\n/**\n * Returns a value at a given index depending on if it's an array or number\n */\nexport function getValue(value: any, index: number, defaultValue: any): any {\n  if (Array.isArray(value)) {\n    const v = value[index]\n    return v == null ? defaultValue : v\n  }\n\n  return value\n}\n\n/**\n * Prevents errors from being thrown while accessing nested modifier objects\n * in `popperOptions`\n */\nexport function getModifier(obj: any, key: string): any {\n  return obj && obj.modifiers && obj.modifiers[key]\n}\n\n/**\n * Determines if an array or string includes a value\n */\nexport function includes(a: any[] | string, b: any): boolean {\n  return a.indexOf(b) > -1\n}\n\n/**\n * Determines if the value is a real element\n */\nexport function isRealElement(value: any): value is Element {\n  return value instanceof Element\n}\n\n/**\n * Firefox extensions don't allow setting .innerHTML directly, this will trick\n * it\n */\nexport function innerHTML(): 'innerHTML' {\n  return 'innerHTML'\n}\n\n/**\n * Evaluates a function if one, or returns the value\n */\nexport function invokeWithArgsOrReturn(value: any, args: any[]): any {\n  return typeof value === 'function' ? value.apply(null, args) : value\n}\n\n/**\n * Sets a popperInstance `flip` modifier's enabled state\n */\nexport function setFlipModifierEnabled(modifiers: any[], value: any): void {\n  modifiers.filter((m): boolean => m.name === 'flip')[0].enabled = value\n}\n\n/**\n * Returns a new `div` element\n */\nexport function div(): HTMLDivElement {\n  return document.createElement('div')\n}\n\n/**\n * Applies a transition duration to a list of elements\n */\nexport function setTransitionDuration(\n  els: (HTMLDivElement | null)[],\n  value: number,\n): void {\n  els.forEach(\n    (el): void => {\n      if (el) {\n        el.style.transitionDuration = `${value}ms`\n      }\n    },\n  )\n}\n\n/**\n * Sets the visibility state to elements so they can begin to transition\n */\nexport function setVisibilityState(\n  els: (HTMLDivElement | null)[],\n  state: 'visible' | 'hidden',\n): void {\n  els.forEach(\n    (el): void => {\n      if (el) {\n        el.setAttribute('data-state', state)\n      }\n    },\n  )\n}\n\n/**\n * Evaluates the props object by merging data attributes and disabling\n * conflicting props where necessary\n */\nexport function evaluateProps(\n  reference: ReferenceElement,\n  props: Props,\n): Props {\n  const out = {\n    ...props,\n    content: invokeWithArgsOrReturn(props.content, [reference]),\n    ...(props.ignoreAttributes ? {} : getDataAttributeProps(reference)),\n  }\n\n  if (out.arrow || isUCBrowser) {\n    out.animateFill = false\n  }\n\n  return out\n}\n\n/**\n * Debounce utility. To avoid bloating bundle size, we're only passing 1\n * argument here, a more generic function would pass all arguments. Only\n * `onMouseMove` uses this which takes the event object for now.\n */\nexport function debounce<T>(\n  fn: (arg: T) => void,\n  ms: number,\n): (arg: T) => void {\n  // Avoid wrapping in `setTimeout` if ms is 0 anyway\n  if (ms === 0) {\n    return fn\n  }\n\n  let timeout: any\n\n  return (arg): void => {\n    clearTimeout(timeout)\n    timeout = setTimeout((): void => {\n      fn(arg)\n    }, ms)\n  }\n}\n","import { Props, Targets } from './types'\nimport { hasOwnProperty } from './utils'\nimport { defaultProps } from './props'\n\n/**\n * Helpful wrapper around `console.warn()`.\n * TODO: Should we use a cache so it only warns a single time and not spam the\n * console? (Need to consider hot reloading and invalidation though). Chrome\n * already batches warnings as well.\n */\nexport function warnWhen(condition: boolean, message: string): void {\n  if (condition) {\n    /* eslint-disable-next-line no-console */\n    console.warn(`[tippy.js WARNING] ${message}`)\n  }\n}\n\n/**\n * Helpful wrapper around thrown errors\n */\nexport function throwErrorWhen(condition: boolean, message: string): void {\n  if (condition) {\n    throw new Error(`[tippy.js ERROR] ${message}`)\n  }\n}\n\n/**\n * Validates props with the valid `defaultProps` object\n */\nexport function validateProps(partialProps: Partial<Props> = {}): void {\n  Object.keys(partialProps).forEach(\n    (prop): void => {\n      const value = (partialProps as any)[prop]\n      const didPassTargetProp = prop === 'target'\n      const didPassA11yProp = prop === 'a11y'\n      const didPassShowOnInitProp = prop === 'showOnInit'\n      const didPassOtherUnknownProp =\n        !hasOwnProperty(defaultProps, prop) &&\n        !didPassTargetProp &&\n        !didPassA11yProp &&\n        !didPassShowOnInitProp\n      const didPassGoogleTheme = prop === 'theme' && value === 'google'\n      const didSpecifyPlacementInPopperOptions =\n        prop === 'popperOptions' && value && hasOwnProperty(value, 'placement')\n\n      warnWhen(\n        didPassTargetProp,\n        'The `target` prop was removed in v5 and ' +\n          'replaced with the `delegate()` method. Read more here: ' +\n          'https//atomiks.github.io/tippyjs/addons#event-delegation',\n      )\n\n      warnWhen(\n        didPassA11yProp,\n        'The `a11y` prop was removed in v5. Make ' +\n          'sure the element you are giving a tippy to is natively ' +\n          'focusable, such as <button> or <input>, not <div> or <span>.',\n      )\n\n      warnWhen(\n        didPassShowOnInitProp,\n        'The `showOnInit` prop was renamed to `showOnCreate` in v5.',\n      )\n\n      warnWhen(\n        didPassOtherUnknownProp,\n        '`' +\n          prop +\n          '` is not a valid prop. You ' +\n          'may have spelled it incorrectly. View all of the valid props ' +\n          'here: https://atomiks.github.io/tippyjs/all-props/',\n      )\n\n      warnWhen(\n        didPassGoogleTheme,\n        'The included theme `google` was renamed to `material` in v5.',\n      )\n\n      warnWhen(\n        didSpecifyPlacementInPopperOptions,\n        'Specifying `placement` in `popperOptions` is not supported. Use the ' +\n          'base-level `placement` prop instead.',\n      )\n    },\n  )\n}\n\n/**\n * Validates the `targets` value passed to `tippy()`\n */\nexport function validateTargets(targets: Targets): void {\n  const didPassFalsyValue = !targets\n  const didPassPlainObject =\n    Object.prototype.toString.call(targets) === '[object Object]' &&\n    !(targets as any).addEventListener\n\n  throwErrorWhen(\n    didPassFalsyValue,\n    '`tippy()` was passed `' +\n      targets +\n      '` (an invalid falsy value) as its targets argument. Valid types are: ' +\n      'String (CSS selector), Element, Element[], or NodeList.',\n  )\n\n  throwErrorWhen(\n    didPassPlainObject,\n    '`tippy()` was passed a plain object (virtual ' +\n      'reference element) which is no longer supported in v5. Instead, pass ' +\n      'a placeholder element like `document.createElement(\"div\")`',\n  )\n}\n","import { Targets, Instance, Props } from '../types'\nimport tippy from '..'\nimport { throwErrorWhen } from '../validation'\n\ninterface ListenerObj {\n  element: Element\n  eventType: string\n  listener: EventListener\n  options: boolean | object\n}\n\n/**\n * Creates a delegate instance that controls the creation of tippy instances\n * for child elements (`target` CSS selector).\n * Port of v4's `target` prop to a separate function.\n */\nexport default function delegate(\n  targets: Targets,\n  props: Props & { target: string },\n): Instance | Instance[] | null {\n  if (__DEV__) {\n    throwErrorWhen(\n      !props || !props.target,\n      'You must specify a `target` prop indicating the CSS selector string ' +\n        'matching the target elements that should receive a tippy.',\n    )\n  }\n\n  let listeners: ListenerObj[] = []\n  let childTippyInstances: Instance[] = []\n\n  const { target } = props\n  delete props.target\n\n  const instanceOrInstances = tippy(targets, props)\n\n  function onTrigger(event: Event): void {\n    if (event.target) {\n      const targetNode = (event.target as Element).closest(target)\n\n      if (targetNode) {\n        const instance = tippy(targetNode, { ...props, showOnCreate: true })\n\n        if (instance) {\n          childTippyInstances = childTippyInstances.concat(instance)\n        }\n      }\n    }\n  }\n\n  function on(\n    element: Element,\n    eventType: string,\n    listener: EventListener,\n    options: object | boolean = false,\n  ): void {\n    element.addEventListener(eventType, listener, options)\n    listeners.push({\n      element,\n      eventType,\n      listener,\n      options,\n    })\n  }\n\n  function addEventListeners(instance: Instance): void {\n    const { reference } = instance\n    instance.props.trigger\n      .trim()\n      .split(' ')\n      .forEach(\n        (eventType): void => {\n          switch (eventType) {\n            case 'mouseenter': {\n              on(reference, 'mouseover', onTrigger)\n              break\n            }\n            case 'focus': {\n              on(reference, 'focusin', onTrigger)\n              break\n            }\n            case 'click': {\n              on(reference, 'click', onTrigger)\n            }\n          }\n        },\n      )\n  }\n\n  function removeEventListeners(listeners: ListenerObj[]): void {\n    listeners.forEach(\n      ({ element, eventType, listener, options }: ListenerObj): void => {\n        element.removeEventListener(eventType, listener, options)\n      },\n    )\n    listeners = []\n  }\n\n  function applyMutations(instance: Instance): void {\n    const originalDestroy = instance.destroy\n    instance.destroy = (shouldDestroyChildInstances: boolean = true): void => {\n      if (shouldDestroyChildInstances) {\n        childTippyInstances.forEach(\n          (instance): void => {\n            instance.destroy()\n          },\n        )\n      }\n      childTippyInstances = []\n\n      removeEventListeners(listeners)\n      originalDestroy()\n    }\n\n    addEventListeners(instance)\n\n    instance.setProps({ trigger: 'manual' })\n  }\n\n  if (instanceOrInstances) {\n    if (Array.isArray(instanceOrInstances)) {\n      const instances = instanceOrInstances\n      instances.forEach(applyMutations)\n    } else {\n      const instance = instanceOrInstances\n      applyMutations(instance)\n    }\n  }\n\n  return instanceOrInstances\n}\n","import { Instance } from '../types'\nimport tippy from '..'\nimport { getValue, hasOwnProperty } from '../utils'\nimport { throwErrorWhen } from '../validation'\n\ninterface InstanceMaybePartOfSingleton extends Instance {\n  __singleton__?: boolean\n}\n\n/**\n * Re-uses a single tippy element for many different tippy instances.\n * Replaces v4's `tippy.group()`.\n */\nexport default function createSingleton(\n  tippyInstances: InstanceMaybePartOfSingleton[],\n  optionalProps: { delay: number | [number, number] } = { delay: 0 },\n): Instance {\n  if (__DEV__) {\n    if (!Array.isArray(tippyInstances)) {\n      throwErrorWhen(\n        !tippyInstances,\n        'First argument to `createSingleton()` must be an array of tippy ' +\n          'instances. The passed value was `' +\n          tippyInstances +\n          '`',\n      )\n\n      throwErrorWhen(\n        // @ts-ignore\n        tippyInstances.reference && tippyInstances.reference._tippy,\n        'First argument to `createSingleton()` must be an *array* of tippy ' +\n          'instances. The passed value was a *single* tippy instance.',\n      )\n    }\n\n    const isAnyInstancePartOfExistingSingleton = tippyInstances.some(\n      (instance): boolean => hasOwnProperty(instance, '__singleton__'),\n    )\n\n    throwErrorWhen(\n      isAnyInstancePartOfExistingSingleton,\n      'The passed tippy instance(s) are already part of an existing ' +\n        'singleton instance. Make sure you destroy the previous singleton ' +\n        'before calling `createSingleton()` again.',\n    )\n\n    tippyInstances.forEach(\n      (instance): void => {\n        instance.__singleton__ = true\n      },\n    )\n  }\n\n  const singletonInstance = tippy(document.createElement('div')) as Instance\n  let { delay } = optionalProps\n\n  let showTimeout: any\n  let hideTimeout: any\n  let onTrigger: (instance: Instance, event: Event) => void\n  let onUntrigger: (instance: Instance, event: Event) => void\n\n  function clearTimeouts(): void {\n    clearTimeout(showTimeout)\n    clearTimeout(hideTimeout)\n  }\n\n  tippyInstances.forEach(\n    (instance): void => {\n      // To prevent bugs with `hideOnClick`, we need to let the original tippy\n      // instance also go through its lifecycle (i.e. be mounted to the DOM as\n      // well). To prevent it from being seen/overlayed over the singleton\n      // tippy, we can set its opacity to 0\n      instance.popper.style.opacity = '0'\n\n      onTrigger = instance.props.onTrigger\n      onUntrigger = instance.props.onUntrigger\n\n      const originalClearDelayTimeouts = instance.clearDelayTimeouts\n      instance.clearDelayTimeouts = (): void => {\n        originalClearDelayTimeouts()\n        clearTimeouts()\n      }\n\n      instance.setProps({\n        delay: 0,\n        onTrigger(instance, event): void {\n          onTrigger(instance, event)\n\n          const props = { ...instance.props }\n          delete props.delay\n\n          singletonInstance.setProps(props)\n\n          singletonInstance.reference.getBoundingClientRect = ():\n            | DOMRect\n            | ClientRect => {\n            return instance.reference.getBoundingClientRect()\n          }\n\n          clearTimeouts()\n          // Edge case: if the tippy is currently hiding (but still mounted and\n          // visible due to its opacity), it will slide to the new reference\n          // element but fully to fade out before fading back in.\n          // Also, we need to ensure the `popper` element doesn't set its\n          // `transitionDuration` to 0ms, so it can transition smoothly\n          if (\n            !singletonInstance.state.isVisible &&\n            singletonInstance.state.isMounted\n          ) {\n            singletonInstance.show(undefined, false)\n          } else {\n            showTimeout = setTimeout((): void => {\n              singletonInstance.show()\n            }, getValue(delay, 0, tippy.defaultProps.delay))\n          }\n        },\n        onUntrigger(instance, event): void {\n          onUntrigger(instance, event)\n\n          clearTimeouts()\n          hideTimeout = setTimeout((): void => {\n            singletonInstance.hide()\n          }, getValue(delay, 1, tippy.defaultProps.delay))\n        },\n      })\n\n      // Ensure the lifecycles functions are updateable\n      const originalSetProps = instance.setProps\n      instance.setProps = (partialProps): void => {\n        // `delay` can't be updated\n        delete partialProps.delay\n\n        originalSetProps(partialProps)\n\n        onTrigger = partialProps.onTrigger || onTrigger\n        onUntrigger = partialProps.onUntrigger || onUntrigger\n      }\n    },\n  )\n\n  const originalSetProps = singletonInstance.setProps\n  singletonInstance.setProps = (partialProps): void => {\n    delay = partialProps.delay !== undefined ? partialProps.delay : delay\n    originalSetProps(partialProps)\n  }\n\n  const originalDestroy = singletonInstance.destroy\n  singletonInstance.destroy = (\n    shouldDestroyPassedInstances: boolean = true,\n  ): void => {\n    tippyInstances.forEach(\n      (instance): void => {\n        // Reset the original lifecycle hooks to prevent stack overflow if\n        // calling again.\n        // Note: users must always destroy the singleton instance before calling\n        // `createSingleton()` again on the same instances.\n        instance.setProps({\n          onTrigger,\n          onUntrigger,\n        })\n\n        if (__DEV__) {\n          delete instance.__singleton__\n        }\n\n        if (shouldDestroyPassedInstances) {\n          instance.destroy()\n        }\n      },\n    )\n\n    originalDestroy()\n  }\n\n  return singletonInstance\n}\n","/* eslint-disable no-undef */\nimport delegate from '../src/addons/delegate.ts'\nimport createSingleton from '../src/addons/createSingleton.ts'\n\nif (typeof tippy === 'function') {\n  tippy.delegate = delegate\n  tippy.createSingleton = createSingleton\n} else {\n  throw new Error(\n    '[tippy.js ERROR] `tippy` is not a global function. Make sure you have ' +\n      'included the tippy script before tippy-addons.',\n  )\n}\n\nexport { delegate, createSingleton }\n"],"names":["isBrowser","window","document","ua","navigator","userAgent","isIE","test","isUCBrowser","isIOS","platform","hasOwnProperty","obj","key","call","getValue","value","index","defaultValue","Array","isArray","v","throwErrorWhen","condition","message","Error","delegate","targets","props","target","listeners","childTippyInstances","instanceOrInstances","tippy","onTrigger","event","targetNode","closest","instance","showOnCreate","concat","on","element","eventType","listener","options","addEventListener","push","addEventListeners","reference","trigger","trim","split","forEach","removeEventListeners","removeEventListener","applyMutations","originalDestroy","destroy","shouldDestroyChildInstances","setProps","instances","createSingleton","tippyInstances","optionalProps","delay","_tippy","isAnyInstancePartOfExistingSingleton","some","__singleton__","singletonInstance","createElement","showTimeout","hideTimeout","onUntrigger","clearTimeouts","clearTimeout","popper","style","opacity","originalClearDelayTimeouts","clearDelayTimeouts","getBoundingClientRect","state","isVisible","isMounted","show","undefined","setTimeout","defaultProps","hide","originalSetProps","partialProps","shouldDestroyPassedInstances"],"mappings":"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"}